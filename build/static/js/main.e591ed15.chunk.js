(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(98),c=n.n(s),r=(n(107),n(11)),i=n(12),l=n(14),u=n(13),p=(n(41),n(101)),h=n(5),d=n(4),b=n.n(d),j=n(7),f=n(18),g=n.n(f),O=n(38),v=n(1),x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).updateData=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put("/bookreacts/".concat(a.props.bookreact._id),{title:a.state.title,sypnopsis:a.state.sypnopsis,url:a.state.url,likeCount:a.state.likeCount});case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.handleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a.handleSubmit=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.updateData();case 3:return e.next=5,a.props.fetchdata();case 5:a.props.toggleEdit();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={title:a.props.bookreact.title,sypnopsis:a.props.bookreact.sypnopsis,url:a.props.bookreact.url,likeCount:a.props.bookreact.likeCount},a}return Object(i.a)(n,[{key:"render",value:function(){return this.props.edit?Object(v.jsxs)("form",{className:"toggle",onSubmit:this.handleSubmit,children:[Object(v.jsx)("input",{type:"text",value:this.state.title,onChange:this.handleChange,id:"title",placeholder:"title"}),Object(v.jsx)("input",{type:"text",value:this.state.sypnopsis,onChange:this.handleChange,id:"sypnopsis",placeholder:"sypnopsis"}),Object(v.jsx)("input",{type:"text",value:this.state.likeCount,onChange:this.handleChange,id:"likeCount",placeholder:"likeCount"}),Object(v.jsx)("input",{type:"submit"})]}):""}}]),n}(a.Component),m=n(60);var k=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(""),c=Object(m.a)(s,2),r=c[0],i=c[1],l=function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files,(a=new FormData).append("file",n[0]),a.append("upload_preset","mernbook"),o(!0),e.next=7,fetch("https://api.cloudinary.com/v1_1/dfz76cs2a/image/upload",{method:"post",body:a});case 7:return s=e.sent,e.next=10,s.json();case 10:c=e.sent,console.log(c),i(c.secure_url),o(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"Img",children:[Object(v.jsx)("input",{type:"file",name:"file",placeholder:"Upload an Img",onChange:l}),n?Object(v.jsx)("h3",{children:"Loading"}):Object(v.jsx)("img",{src:r,style:{width:"300px"}})]})},y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).toggleEdit=function(){a.setState({edit:!a.state.edit})},a.deleteBookreact=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete("/bookreacts/".concat(t));case 3:e.sent,a.props.fetchdata(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.state={edit:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h4",{class:"results",onClick:function(){return window.open(e.props.bookreact.url)},children:[Object(v.jsxs)("div",{children:[" Title: ",this.props.bookreact.title," "]}),Object(v.jsxs)("div",{children:[" Sypnopsis: ",this.props.bookreact.sypnopsis]}),Object(v.jsxs)("div",{children:["  Author: ",this.props.bookreact.likeCount]})]}),Object(v.jsx)(k,{}),Object(v.jsx)("button",{className:"edit-btn",onClick:this.toggleEdit,children:this.state.edit?"Close":"Edit"}),Object(v.jsx)("button",{onClick:function(){return e.deleteBookreact(e.props.bookreact._id)},children:"Delete"}),Object(v.jsx)(x,{edit:this.state.edit,bookreact:this.props.bookreact,fetchdata:this.props.fetchdata,toggleEdit:this.toggleEdit})]})}}]),n}(a.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(O.a)({},e.target.id,e.target.value))},a.createNewData=Object(j.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post("/bookreacts",{title:a.state.title,sypnopsis:a.state.sypnopsis,url:a.state.url,likeCount:a.state.likeCount,email:a.props.email});case 3:e.sent,a.props.fetchdata(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.handleSubmit=function(e){e.preventDefault(),a.createNewData(),a.setState({title:"",sypnopsis:"",url:"",likeCount:""})},a.state={title:"",sypnopsis:"",url:"",likeCount:""},a}return Object(i.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("form",{class:"create",onSubmit:this.handleSubmit,children:[Object(v.jsx)("input",{type:"text",value:this.state.title,onChange:this.handleChange,id:"title",placeholder:"title"}),Object(v.jsx)("input",{type:"text",value:this.state.sypnopsis,onChange:this.handleChange,id:"sypnopsis",placeholder:"sypnopsis"}),Object(v.jsx)("input",{type:"text",value:this.state.likeCount,onChange:this.handleChange,id:"likeCount",placeholder:"author"}),Object(v.jsx)("input",{type:"submit",value:"Add books"})]})}}]),n}(a.Component),w=(n(127),n(18)),S=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).logOut=function(){localStorage.clear(),window.location.href="/"},a.uploadImage=function(){var e=new FormData;console.log(a.state.imageSelected),e.append("api_key","292816617687926"),e.append("file",a.state.imageSelected),e.append("upload_preset","kfx9w1n8"),w.post("https://api.cloudinary.com/v1_1/dznvifj49/image/upload",e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},a.fetchdata=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("/bookreacts/".concat(a.state.userEmail));case 3:t=e.sent,a.setState({bookreacts:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.componentDidMount=function(){a.fetchdata()},a.componentDidMount=function(){var e=JSON.parse(localStorage.getItem("login"));a.setState({userEmail:e.email})},a.state={bookreacts:[],userEmail:"",imageSelected:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"home",children:[Object(v.jsx)("button",{className:"logout",onClick:this.logOut,children:" Logout "}),Object(v.jsx)(C,{fetchdata:this.fetchdata,email:this.state.userEmail}),this.state.bookreacts.map((function(t,n){return Object(v.jsx)(y,{bookreact:t,fetchdata:e.fetchdata},t._id)}))]})})}}]),n}(a.Component),N=n(99),D=n.n(N),E=n(100),_=n.n(E),I=g.a.create({}),F={googleLogin:function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.post("/bookreacts/googlelogin",{tokenId:t.tokenId});case 3:n=e.sent,localStorage.setItem("login",JSON.stringify(n.data.user)),window.location.href="/home",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).responseSuccessGoogle=function(){var e=Object(j.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,F.googleLogin(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),e.responseFailureGoogle=function(e){console.log(e)},e}return Object(i.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"loginGoogle-div",children:Object(v.jsx)(D.a,{clientId:"1044015139792-jjl22brbh17oo2a7jkgg720tcqqc6cgf.apps.googleusercontent.com",render:function(e){return Object(v.jsx)(_.a,{className:"signInButton",onClick:e.onClick,disabled:e.disabled,children:" "})},buttonText:"Login",onSuccess:this.responseSuccessGoogle,onFailure:this.responseFailureGoogle,cookiePolicy:"single_host_origin",className:"loginGoogle"})})}}]),n}(a.Component),L=function(){return Object(v.jsx)("div",{className:"login",children:Object(v.jsx)(G,{})})},A=function(){return Object(v.jsx)(p.a,{children:Object(v.jsx)(a.Fragment,{children:Object(v.jsxs)(h.c,{children:[Object(v.jsx)(h.a,{path:"/",exact:!0,component:L}),Object(v.jsx)(h.a,{path:"/home",component:S})]})})})},B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(A,{})})}}]),n}(a.Component);c.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(B,{})}),document.getElementById("root"))},41:function(e,t,n){}},[[249,1,2]]]);
//# sourceMappingURL=main.e591ed15.chunk.js.map